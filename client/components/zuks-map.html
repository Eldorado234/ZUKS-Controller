<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/leaflet-map/leaflet-map.html">

<polymer-element name="zuks-map" attributes="volunteers">
  <template>
    <style>
    :host {
      display: block;
      height: 100%;
    }

    leaflet-map {
      width: 100%;
      height: 100%;
    }
    </style>
    
    <leaflet-map
      longitude="8.238611"
      latitude="50.083056"
      zoom="14"
      id="map"
      on-contextmenu="{{clickedRight}}">
        <template repeat="{{volunteer in volunteers}}">
          <leaflet-marker longitude="{{volunteer.location.longitude}}" 
                        latitude="{{volunteer.location.latitude}}">
            {{volunteer.first_name}} {{volunteer.last_name}}
          </leaflet-marker>
        </template>
        
    </leaflet-map>

  </template>
  <script>
  Polymer({
    clickedRight: function(e) {
      if (e.detail && e.detail.latlng) {
        this.fire('volunteer-added', {
          latitude: e.detail.latlng.lat,
          longitude: e.detail.latlng.lng
        });
      }
    }
  });
  </script>
</polymer-element>
