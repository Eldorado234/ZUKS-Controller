<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-dialog/paper-action-dialog.html">
<link rel="import" href="../bower_components/paper-input/paper-input-decorator.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">

<link rel="import" href="zuks-service.html">
<link rel="import" href="zuks-map.html">
<link rel="import" href="zuks-volunteer-list.html">

<polymer-element name="zuks-app">
  <template>
    <style>
    :host {
      
    }

    .container {
      height: 100%;
      background-color: #fff;
    }

    </style>
    
    <zuks-service volunteers="{{volunteers}}" id="service"></zuks-service>
    
    <div class="container" layout horizontal>
      <zuks-map flex volunteers="{{volunteers}}" on-volunteer-added="{{volunteerAdded}}"></zuks-map>
      <zuks-volunteer-list volunteers="{{volunteers}}"></zuks-volunteer-list>
    </div>

    <paper-action-dialog heading="Freiwilligen hinzufÃ¼gen" id="addVolunteer" backdrop="true">
        <paper-input-decorator label="Vorname">
          <input is="core-input" value="{{volunteer.first_name}}" autofocus />
        </paper-input-decorator>
        <paper-input-decorator label="Nachname">
          <input is="core-input" value="{{volunteer.last_name}}" />
        </paper-input-decorator>

        <paper-button affirmative>Abbrechen</paper-button>
        <paper-button affirmative on-click="{{saveVolunteer}}">Speichern</paper-button>
    </paper-action-dialog>
    

  </template>
  <script>
  Polymer({
    volunteerAdded: function(volunteerLocation) {
      this.volunteer = {
        first_name: "",
        last_name: "",
        location: volunteerLocation.detail,
        group: null
      }
      this.$.addVolunteer.open();
    },
    saveVolunteer: function() {
      this.$.service.addVolunteer(this.volunteer);
    }
  });
  </script>
</polymer-element>
